<div data-role="page" id="tripPage">
  <div data-role="header" id="header">
    <%= fromPlace %> to <%= toPlace %>
  </div>

  <!-- kind of funky the way stuff is woven here, but it does produce legal HTML. If there is a trip plan,
       the following is rendered; elsewise, the div gets closed below -->
  <% if (legs) { %>
  <ul>
    <!-- http://stackoverflow.com/questions/7415641/cradle-express-ejs-convert-html-to-its-entities -->
    <%- partial('leg', {collection: legs}) %>
  </ul>

  <% if (!reverse) { %>
     <a href="?reverse=true" data-role="button">Reverse Trip</a>
  <% } else { %>
     <a href="?reverse=false" data-role="button">Reverse Trip</a>
  <% } %>
  <a href="http://m.trimet.org" data-role="button">TriMet Mobile Site</a>
  <a href="tel:5032387433" data-role="button">Call TriMet (503-238-RIDE)</a>
</div>

<% } else { %> <!-- no trip plan found -->
Bother, we couldn't find a trip to <%= toPlace %>. The <a href="http://m.trimet.org">TriMet Mobile Site</a> might have a suggestion,
or you could call TriMet at <a href="tel:5032387433">503-238-RIDE (7433)</a>.
</div> <!-- close the div that is inside the if -->
<% } %>

