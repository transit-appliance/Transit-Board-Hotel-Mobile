<li>
  <% if (leg.attr('mode') == 'Walk') { %>
    Walk to <%= leg.find('to description').text() %>
    (<a href="/walk/<%= encodeURIComponent(leg.find('from description').text())%>%20to%20<%= encodeURIComponent(leg.find('to description').text()) %>/<%= leg.find('from pos lat').text() %>,<%= leg.find('from pos lon').text() %>/<%= leg.find('to pos lat').text() %>,<%= leg.find('to pos lon').text() %>">map</a>)
  <% } else { %>
    At <%= leg.find('time-distance startTime').text() %>,
    board <%= leg.find('route name').text().replace(' to ', ' towards ') %>; 
    offboard at <%= leg.find('to description').text() %> at <%= leg.find('time-distance endTime').text() %>
    (<a href="/transit/<%= encodeURIComponent(leg.find('from description').text())%>%20to%20<%= encodeURIComponent(leg.find('to description').text()) %>/<%= leg.find('lineURL').attr('param') %>" >map</a>)
  <% } %>
</li>
